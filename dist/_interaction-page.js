"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),InteractionPage=function(){function t(e,i,n){_classCallCheck(this,t),this._map=e,this._config=i,this.interactionPopup=n,this.closeButton=document.getElementById("navigation-map-close"),this.navigationMapHeader=document.getElementById("navigation-map-header"),this.fullMapLink=document.getElementById("full-map-link"),this.navigationMapClose=document.getElementById("navigation-map-close"),this.mapIcon=document.getElementById("map-icon"),this.hostContainer=document.getElementById("navigation-map-container"),this.body=document.getElementsByTagName("body")[0],this.filterContainer=document.getElementById("filter-container"),this.viewportMetaTag=[].slice.call(document.getElementsByName("viewport"),0)[0],this.htmlDoc=document.getElementsByTagName("html")[0],this.filter=["has","slug"],this.initialScrollPosition=0}return _createClass(t,[{key:"init",value:function(){var t=this;this.hostContainer.addEventListener("mouseenter",function(){window&&window.innerWidth<760?t.fullsize():t.hoversize()},!1),this.navigationMapHeader.addEventListener("click",function(){t.fullsize()},!1),this.fullMapLink.addEventListener("click",function(){t.fullsize()},!1),this.navigationMapClose.addEventListener("click",function(){t.close()},!1),this.mapIcon.addEventListener("click",function(){window&&window.innerWidth<760?t.fullsize():t.hoversize()},!1)}},{key:"hoversize",value:function(){var t,e=this;this.permanentlyClosed=!1,!this.fullSize&&e.hostContainer&&e.hostContainer.classList.add("hoversize"),t=document.getElementsByClassName("mask")[0],t&&null!==t&&void 0!==t||(t=document.createElement("div"),t.classList.add("mask"),t.addEventListener("click",function(){e.fullsize()},!1),e.hostContainer.insertBefore(t,e.closeButton)),setTimeout(function(){e.closeButton.style.visibility="visible"},2e3)}},{key:"fullsize",value:function(){var t=this;this.fullSize=!0,this.permanentlyClosed=!1,this.dimensionSelector=document.getElementById("dimension-selector"),this.dimensionSelector&&this.dimensionSelector.classList.add("visible"),this.filterContainer&&this.filterContainer.classList.add("visible"),t.hostContainer&&(t.hostContainer.classList.add("fullsize"),t.hostContainer.classList.remove("hoversize")),t.hostContainer,isIos()?(t.initialScrollPosition=t.hostContainer.scrollTop,t.hostContainer.style.position="relative",t.hostContainer.style.overflow="auto",t.hostContainer.style.top="auto",t.hostContainer.style.left="auto",t.hostContainer.style.right="auto",t.hostContainer.style.bottom="auto",t.hostContainer.style.height="calc(100vh - 4rem)",t.body.appendChild(t.hostContainer),window.scrollTo(0,document.body.scrollHeight)):(t.htmlDoc.classList.add("allabouthemap"),t.hostContainer.style.zIndex="9999"),webgl_detect()&&!isIE11()&&(t._map.setLayoutProperty("icons-active","icon-size",1.5),t.interaction3D=new Interaction3D(t._map,t._config),t.interaction3D.init(!1),t.interaction3D.shiftPitch(t._map,75))}},{key:"close",value:function(){var t=this;this.fullSize=!1,this.permanentlyClosed=!0,this.filterContainer&&this.filterContainer.classList.remove("visible"),t.hostContainer&&(t.hostContainer.classList.remove("fullsize"),t.hostContainer.classList.remove("hoversize")),t.hostContainer&&(t.hostContainer.style.zIndex="999"),isIos()?(window.scrollTo(0,t.initialScrollPosition),t.hostContainer.style.position="fixed",t.hostContainer.style.overflow="hidden",t.hostContainer.style.top="13.5rem",t.hostContainer.style.right="0",window.innerWidth>760?t.hostContainer.style.height="17rem":t.hostContainer.style.height="4.5rem"):t.htmlDoc.classList.remove("allabouthemap"),t.interactionPopup.emptyArray(t._map),webgl_detect()&&!isIE11()&&(t.interaction3D.resetPitch(t._map),t._map.setLayoutProperty("icons-active","icon-size",1))}}]),t}();