"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,i){for(var r=0;r<i.length;r++){var t=i[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(i,r,t){return r&&e(i.prototype,r),t&&e(i,t),i}}(),Lines=function(){function e(i,r){_classCallCheck(this,e),this._map=i,this._config=r,this.speedFactor=30,this.animation="",this.startTime=0,this.progress=0,this.resetTime=!1,this.layerId="cjc4zc40d13wa2wqskv9bk020"}return _createClass(e,[{key:"init",value:function(){this._draw()}},{key:"drawOldLayers",value:function(e){var i=this;i._map.addLayer({id:"route-bus_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",black],["alt","#999"]]},"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","isNieuw",!1],["==","transport_type","bus"]]},"origins"),i._map.addLayer({id:"route-tram_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",black],["alt","#999"]]},"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","isNieuw",!1],["==","transport_type","tram"]]},"origins"),i._map.addLayer({id:"route-metro_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt",pink]]},"line-width":4,"line-dasharray":[1,1]},filter:["all",["==","isNieuw",!1],["==","transport_type","metro"]]},"origins"),i._map.addLayer({id:"route-train_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt",pink]]},"line-width":4,"line-dasharray":[1,1]},filter:["all",["==","isNieuw",!0],["==","transport_type","trein"]]},"origins")}},{key:"drawNewLayers",value:function(e){var i=this;i._map.addLayer({id:"route-bus_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt",pink]]},"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","isNieuw",!0],["==","transport_type","bus"]]},"origins"),i._map.addLayer({id:"route-tram_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt",pink]]},"line-width":4,"line-dasharray":[1,1]},filter:["all",["==","isNieuw",!0],["==","transport_type","tram"]]},"origins"),i._map.addLayer({id:"route-metro_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt","#999"]]},"line-width":4,"line-dasharray":[.5,.5]},filter:["all",["==","isNieuw",!0],["==","transport_type","metro"]]},"origins"),i._map.addLayer({id:"route-train_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",purple],["alt",pink]]},"line-width":4,"line-dasharray":[1,1]},filter:["all",["==","isNieuw",!0],["==","transport_type","trein"]]},"origins")}},{key:"_animateLine",value:function(e){var i=this;if(i.resetTime?(i.startTime=performance.now()-i.progress,i.resetTime=!1):i.progress=e-i.startTime,i.progress>360*i.speedFactor)i.startTime=e,i.lines.features[0].geometry.coordinates=[];else{var r=i.progress/i.speedFactor,t=40*Math.sin(r*Math.PI/90);i.lines.features[0].geometry.coordinates.push([r,t]),i._map.getSource("lines").setData(i.lines)}i.animation=requestAnimationFrame(i._animateLine)}}]),e}();