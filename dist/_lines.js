"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),Lines=function(){function e(t,i){_classCallCheck(this,e),this._map=t,this._config=i,this.speedFactor=30,this.animation="",this.startTime=0,this.progress=0,this.resetTime=!1,this.layerId="cjc4zc40d13wa2wqskv9bk020"}return _createClass(e,[{key:"init",value:function(){this._draw()}},{key:"draw",value:function(){var e,t=this;console.log(t._config.dataset),t._map.addSource("lines",{type:"geojson",data:t._config.dataset}),t._map.addLayer({id:"bus-old",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":"#000","line-width":6,"line-dasharray":[1,0]},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","bus"]]}),t._map.addLayer({id:"bus-new",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":donkergeel,"line-width":6,"line-dasharray":[1,0]},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","bus"]]}),t._map.addLayer({id:"metro-old",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":"#000","line-width":12,"line-dasharray":[.25,.25]},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","metro"]]}),t._map.addLayer({id:"metro-new",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":donkergeel,"line-width":12,"line-dasharray":[.25,.25]},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","metro"]]}),t._map.addLayer({id:"tram-old",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":"#000","line-gap-width":4,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","tram"]]}),t._map.addLayer({id:"tram-new",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":donkergeel,"line-gap-width":4,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","tram"]]}),t._map.addLayer({id:"caption",type:"symbol",source:"lines",layout:(e={visibility:"visible","icon-image":"rect_purple","icon-padding":0,"icon-text-fit":"both","icon-text-fit-padding":[10,5,0,5],"icon-allow-overlap":!0},_defineProperty(e,"icon-padding",20),_defineProperty(e,"icon-anchor","right"),_defineProperty(e,"text-field","{trajectNaam}"),_defineProperty(e,"text-font",["Avenir LT Std 85 Heavy"]),_defineProperty(e,"text-size",20),_defineProperty(e,"text-offset",[0,0]),_defineProperty(e,"text-anchor","center"),e),paint:{"text-color":"#fff"},filter:["all",["has","trajectNaam"],["==","trajectId",""]]})}},{key:"_animateLine",value:function(e){var t=this;if(t.resetTime?(t.startTime=performance.now()-t.progress,t.resetTime=!1):t.progress=e-t.startTime,t.progress>360*t.speedFactor)t.startTime=e,t.lines.features[0].geometry.coordinates=[];else{var i=t.progress/t.speedFactor,a=40*Math.sin(i*Math.PI/90);t.lines.features[0].geometry.coordinates.push([i,a]),t._map.getSource("lines").setData(t.lines)}t.animation=requestAnimationFrame(t._animateLine)}}]),e}();