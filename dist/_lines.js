"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),Lines=function(){function e(t,i){_classCallCheck(this,e),this._map=t,this._config=i,this.speedFactor=30,this.animation="",this.startTime=0,this.progress=0,this.resetTime=!1,this.layerId="cjc4zc40d13wa2wqskv9bk020"}return _createClass(e,[{key:"init",value:function(){this._draw()}},{key:"drawOldLayers",value:function(e){var t=this;t._map.addLayer({id:"route-bus_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","isNieuw",!1],["==","transport_type","bus"]]}),t._map.addLayer({id:"route-tram_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[.5,.5]},filter:["all",["==","isNieuw",!1],["==","transport_type","tram"]]}),t._map.addLayer({id:"route-metro_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,.5]},filter:["all",["==","isNieuw",!1],["==","transport_type","metro"]]}),t._map.addLayer({id:"route-train_old",type:"line",source:"routes-oud",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,2]},filter:["all",["==","isNieuw",!0],["==","transport_type","trein"]]})}},{key:"drawNewLayers",value:function(e){var t=this;t._map.addLayer({id:"route-bus_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","isNieuw",!0],["==","transport_type","bus"]]}),t._map.addLayer({id:"route-tram_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[.5,.5]},filter:["all",["==","isNieuw",!0],["==","transport_type","tram"]]}),t._map.addLayer({id:"route-metro_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,.5]},filter:["all",["==","isNieuw",!0],["==","transport_type","metro"]]}),t._map.addLayer({id:"route-train_new",type:"line",source:"routes-nieuw",layout:{"line-join":"miter","line-cap":"square",visibility:"visible"},paint:{"line-color":black,"line-width":4,"line-dasharray":[1,2]},filter:["all",["==","isNieuw",!0],["==","transport_type","trein"]]}),t._map.addLayer({id:"transport-mode-new",type:"symbol",source:"routes-nieuw",layout:{"symbol-placement":"line","icon-rotation-alignment":"viewport","icon-image":{property:"transport_type",type:"categorical",stops:[["trein","trein"],["bus","bus"],["tram","tram"],["metro","metro"],["wandel","voetganger"]]},"icon-size":.7,"icon-padding":20,"icon-allow-overlap":!0,"icon-anchor":"bottom","icon-offset":[30,0],visibility:"none","text-field":"{transport_nrs}","text-size":15,"text-anchor":"bottom","text-rotation-alignment":"viewport","text-offset":[3.2,0],"text-max-width":30,"text-font":["Avenir LT Std 85 Heavy"],"text-transform":"uppercase","text-allow-overlap":!0},paint:{"icon-opacity":1,"text-color":black},filter:["all",["==","isNieuw",!0]]}),t._map.addLayer({id:"transport-mode-old",type:"symbol",source:"routes-oud",layout:{"symbol-placement":"line","icon-rotation-alignment":"viewport","icon-image":{property:"transport_type",type:"categorical",stops:[["trein","trein"],["bus","bus"],["tram","tram"],["metro","metro"],["wandel","voetganger"]]},"icon-size":.7,"icon-padding":20,"icon-allow-overlap":!0,"icon-anchor":"bottom","icon-offset":[30,0],visibility:"none","text-field":"{transport_nrs}","text-size":15,"text-anchor":"bottom","text-rotation-alignment":"viewport","text-offset":[3.2,0],"text-max-width":30,"text-font":["Avenir LT Std 85 Heavy"],"text-transform":"uppercase","text-allow-overlap":!0},paint:{"icon-opacity":1,"text-color":black},filter:["all",["==","isNieuw",!1]]})}},{key:"_animateLine",value:function(e){var t=this;if(t.resetTime?(t.startTime=performance.now()-t.progress,t.resetTime=!1):t.progress=e-t.startTime,t.progress>360*t.speedFactor)t.startTime=e,t.lines.features[0].geometry.coordinates=[];else{var i=t.progress/t.speedFactor,a=40*Math.sin(i*Math.PI/90);t.lines.features[0].geometry.coordinates.push([i,a]),t._map.getSource("lines").setData(t.lines)}t.animation=requestAnimationFrame(t._animateLine)}}]),e}();