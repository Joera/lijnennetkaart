"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Lines=function(){function e(t,a){_classCallCheck(this,e),this._map=t,this._config=a,this.speedFactor=30,this.animation="",this.startTime=0,this.progress=0,this.resetTime=!1,this.layerId="cjc4zc40d13wa2wqskv9bk020"}return _createClass(e,[{key:"init",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET","https://api.mapbox.com/datasets/v1/wijnemenjemee/"+e.layerId+"/features?access_token="+e._config.accessToken),t.send(),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var a=JSON.parse(t.response);a.features=a.features.filter(function(e){return console.log(e.geometry.type),"LineString"==e.geometry.type}),e._draw(a)}}}},{key:"_draw",value:function(e){var t=this;t._map.addSource("lines",{type:"geojson",data:e}),t._map.addLayer({id:"Amstelveenlijn",type:"line",source:"lines",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":donkergeel,"line-width":8,"line-dasharray":[.5,.5]}},"stops")}},{key:"zoom",value:function(){var e=this,t=e._config.dataset.lines.features[1].geometry.coordinates,a=t.reduce(function(e,t){return e.extend(t)},new mapboxgl.LngLatBounds(t[0],t[0]));e._map.fitBounds(a,{padding:100})}},{key:"addLegend",value:function(){var e=document.createElement("div");e.classList.add("legend"),self.hostContainer.appendChild(e)}},{key:"_animateLine",value:function(e){var t=this;if(t.resetTime?(t.startTime=performance.now()-t.progress,t.resetTime=!1):t.progress=e-t.startTime,t.progress>360*t.speedFactor)t.startTime=e,t.lines.features[0].geometry.coordinates=[];else{var a=t.progress/t.speedFactor,n=40*Math.sin(a*Math.PI/90);t.lines.features[0].geometry.coordinates.push([a,n]),t._map.getSource("lines").setData(t.lines)}t.animation=requestAnimationFrame(t._animateLine)}}]),e}();