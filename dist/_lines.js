"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),Lines=function(){function e(t,i){_classCallCheck(this,e),this._map=t,this._config=i,this.speedFactor=30,this.animation="",this.startTime=0,this.progress=0,this.resetTime=!1,this.layerId="cjc4zc40d13wa2wqskv9bk020"}return _createClass(e,[{key:"init",value:function(){this._draw()}},{key:"draw",value:function(){var e,t=this;t._map.addLayer({id:"bus-old",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",black],["alt","#999"]]},"line-width":4,"line-dasharray":[1,0]},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","bus"]]},"origins"),t._map.addLayer({id:"bus-old-icon",type:"symbol",source:"originData",layout:{visibility:"visible","icon-image":"bus-15","icon-padding":0,"icon-size":1,"icon-offset":[20,0],"icon-allow-overlap":!0,"text-field":"{transport_nrs}","symbol-placement":"line","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-size":15,"text-anchor":"left","text-offset":[2,.1],"text-max-width":30,"text-font":["Avenir LT Std 85 Heavy"],"text-transform":"uppercase","text-allow-overlap":!0},paint:{"text-color":"#000"},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","bus"]]},"origins"),t._map.addLayer({id:"bus-new",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":{property:"routeVersion",type:"categorical",stops:[["prio",yellow],["alt",pink]]},"line-width":4,"line-dasharray":[1,1]},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","bus"]]},"origins"),t._map.addLayer({id:"metro-old",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":black,"line-width":4,"line-dasharray":[.25,.25]},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","metro"]]},"origins"),t._map.addLayer({id:"metro-old-icon",type:"symbol",source:"originData",layout:{visibility:"visible","icon-image":"rail-15","icon-padding":0,"icon-size":1,"icon-offset":[20,0],"icon-allow-overlap":!0,"text-field":"{transport_nrs}","symbol-placement":"line","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-size":15,"text-anchor":"left","text-offset":[2,.1],"text-max-width":30,"text-font":["Avenir LT Std 85 Heavy"],"text-transform":"uppercase","text-allow-overlap":!0},paint:{"text-color":"#000"},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","metro"]]},"origins"),t._map.addLayer({id:"metro-new",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":pink,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","metro"]]},"origins"),t._map.addLayer({id:"tram-old",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":black,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","tram"]]},"origins"),t._map.addLayer({id:"tram-old-icon",type:"symbol",source:"originData",layout:{visibility:"visible","icon-image":"rail-light-15","icon-padding":0,"icon-size":1,"icon-offset":[20,0],"icon-allow-overlap":!0,"text-field":"{transport_nrs}","symbol-placement":"line","icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport","text-size":15,"text-anchor":"left","text-offset":[2,.1],"text-max-width":30,"text-font":["Avenir LT Std 85 Heavy"],"text-transform":"uppercase","text-allow-overlap":!0},paint:{"text-color":"#000"},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","tram"]]},"origins"),t._map.addLayer({id:"tram-new",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":yellow,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","tram"]]},"origins"),t._map.addLayer({id:"train-old",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":black,"line-width":4},filter:["all",["==","trajectId",""],["==","isNieuw",!1],["==","transport_type","trein"]]},"origins"),t._map.addLayer({id:"train-new",type:"line",source:"originData",layout:{"line-join":"miter","line-cap":"square"},paint:{"line-color":pink,"line-width":4,"line-dasharray":[2,2]},filter:["all",["==","trajectId",""],["==","isNieuw",!0],["==","transport_type","trein"]]},"origins"),t._map.addLayer({id:"caption",type:"symbol",source:"originData",layout:(e={visibility:"visible","icon-image":"rect_purple","icon-padding":0,"icon-text-fit":"both","icon-text-fit-padding":[10,5,0,5],"icon-allow-overlap":!0},_defineProperty(e,"icon-padding",20),_defineProperty(e,"icon-anchor","right"),e),paint:{"text-color":"#fff"},filter:["all",["has","trajectNaam"],["==","trajectId",""]]},"origins")}},{key:"_animateLine",value:function(e){var t=this;if(t.resetTime?(t.startTime=performance.now()-t.progress,t.resetTime=!1):t.progress=e-t.startTime,t.progress>360*t.speedFactor)t.startTime=e,t.lines.features[0].geometry.coordinates=[];else{var i=t.progress/t.speedFactor,a=40*Math.sin(i*Math.PI/90);t.lines.features[0].geometry.coordinates.push([i,a]),t._map.getSource("lines").setData(t.lines)}t.animation=requestAnimationFrame(t._animateLine)}}]),e}();