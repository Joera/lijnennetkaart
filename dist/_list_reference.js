"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ListReference=function(){function e(t){_classCallCheck(this,e),this.interactionPopup=t}return _createClass(e,[{key:"generateHTML",value:function(e){var t=this,i=void 0,n=void 0;return i=document.createElement("ul"),t.features=e,t.features.forEach(function(e){n=document.createElement("li"),"zuidasdok"===e.properties.slug?n.innerHTML='\n                        <span class="evensmallerfont" data-slug="zuidasdok">'+e.properties.title+"</span>\n                ":n.innerHTML=' \n                        <span class="evensmallerfont" data-slug="'+e.properties.slug+'">'+e.properties.title+"</span>\n                ",i.appendChild(n)}),i}},{key:"generateTabs",value:function(){var e=void 0,t=void 0,i=void 0;return e=document.createElement("ul"),t=document.createElement("li"),t.innerHTML="Kaart",t.id="tab_map",t.classList.add("active"),e.appendChild(t),i=document.createElement("li"),i.innerHTML="Lijst",i.id="tab_list",e.appendChild(i),e}},{key:"addEventListeners",value:function(e,t){var i=this;[].slice.call(t.querySelectorAll("ul>li>span")).forEach(function(t){t.addEventListener("click",function(t){t&&t.target.attributes["data-slug"]&&i.focus(e,t.target.attributes["data-slug"].nodeValue)},!1)})}},{key:"addEventListenersMobile",value:function(){var e=void 0,t=void 0;e=document.getElementById("projects-map"),t=document.getElementById("map-list-container"),setTimeout(function(){var i=document.getElementById("tab_map"),n=document.getElementById("tab_list");i&&i.addEventListener("click",function(a){e&&(e.style.visibility="visible",e.style.height="100%"),t&&(t.style.visibility="hidden"),i.classList.add("active"),n.classList.remove("active")}),n&&n.addEventListener("click",function(a){e&&(e.style.visibility="hidden",e.style.height="0px"),t&&(t.style.visibility="visible"),i.classList.remove("active"),n.classList.add("active")})},500)}},{key:"focus",value:function(e,t){webgl_detect()&&!isIE11()?this._GL_Focus(e,t):this._JS_Focus(e,t)}},{key:"_GL_Focus",value:function(e,t){var i=this,n=void 0,a=void 0,s=void 0,o=void 0,r=e.queryRenderedFeatures({filter:["==","slug",t],layers:["icons"]});if(r[0]){if(window.innerWidth<=760){var l=document.getElementById("projects-map");l&&(l.style.visibility="visible",l.style.height="100%");var c=document.getElementById("map-list-container");c&&(c.style.visibility="hidden");var u=document.getElementById("tab_map"),d=document.getElementById("tab_list");u.classList.add("active"),d.classList.remove("active")}n=i.interactionPopup.createPopup(r[0]),a=[-2,-14],s=r[0].geometry.coordinates,o=r[0].properties.type,i.interactionPopup.openPopup(e,n,s,o,a,!0),e.easeTo({center:[s[0]+.001,s[1]-5e-4],zoom:14,speed:.2,curve:1})}}},{key:"_JS_Focus",value:function(e,t){var i=this,n=void 0,a=void 0,s=void 0;s=i.features.filter(function(e){return e.properties.slug===t}),n=i.interactionPopup.createPopup(s[0]),a=new L.LatLng(s[0].geometry.coordinates[1],s[0].geometry.coordinates[0]),console.log(a);L.popup({className:s[0].properties.type,offset:[0,36]}).setLatLng(a).setContent(n).openOn(e)}}]),e}();